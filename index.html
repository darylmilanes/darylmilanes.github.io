<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>DARYL MILANES â€” Portfolio</title>
    
    <!-- Icons & Manifest -->
    <link rel="icon" type="image/png" href="favicon.png">
    <link rel="apple-touch-icon" href="icon-192.png">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@500;600;700;800&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    
    <!-- Tailwind CSS (via CDN for single-file portability) -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- Custom Config -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        display: ['Montserrat', 'sans-serif'],
                    },
                    colors: {
                        brand: {
                            DEFAULT: '#004080', // Deep Royal Blue
                            light: '#0059b3',
                            dark: '#002a55',
                        },
                        canvas: '#fafeff', // Ice White
                        ink: {
                            DEFAULT: '#474747', // Graphite
                            light: '#6b7280',
                        },
                        accent: {
                            amber: '#FFB347',
                            teal: '#2A9D8F',
                            red: '#E63946',
                        }
                    },
                    boxShadow: {
                        'glass': '0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -1px rgba(0, 0, 0, 0.03)',
                        'glass-hover': '0 10px 15px -3px rgba(0, 64, 128, 0.1), 0 4px 6px -2px rgba(0, 64, 128, 0.05)',
                    }
                }
            }
        }
    </script>

    <style>
        /* Custom Scrollbar for horizontal scrolling zones */
        .hide-scroll::-webkit-scrollbar {
            display: none;
        }
        .hide-scroll {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        
        /* Glassmorphism Utilities */
        .glass-panel {
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border-bottom: 1px solid rgba(0, 0, 0, 0.05);
        }

        /* Smooth Fade In */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in {
            animation: fadeIn 0.4s ease-out forwards;
        }
    </style>
</head>
<body class="bg-canvas text-ink font-sans antialiased min-h-screen flex flex-col selection:bg-brand selection:text-white">

    <!-- Sticky Header -->
    <header class="sticky top-0 z-50 glass-panel shadow-sm transition-all duration-300">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16 md:h-20 gap-4">
                
                <!-- Logo Area -->
                <a href="#" class="flex items-center gap-3 group shrink-0" onclick="resetFilters()">
                    <img src="logo.png" alt="Daryl Milanes Logo" class="w-10 h-10 object-contain transition-transform group-hover:scale-105">
                    <div class="flex flex-col">
                        <span class="font-display font-bold text-brand leading-none tracking-tight group-hover:text-brand-light transition-colors">DARYL MILANES</span>
                        <span class="text-[10px] font-semibold tracking-widest text-ink-light uppercase mt-0.5">Portfolio</span>
                    </div>
                </a>

                <!-- Desktop Search (Hidden on Mobile) -->
                <div class="hidden md:flex flex-1 max-w-md mx-4">
                    <div class="relative w-full group">
                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-gray-400 group-focus-within:text-brand transition-colors">
                            <i data-lucide="search" class="w-4 h-4"></i>
                        </div>
                        <input type="text" id="desktopSearch" placeholder="Find an app..." 
                            class="block w-full pl-10 pr-3 py-2 border border-gray-200 rounded-full leading-5 bg-white placeholder-gray-400 focus:outline-none focus:border-brand focus:ring-1 focus:ring-brand sm:text-sm transition-all shadow-sm">
                    </div>
                </div>

                <!-- Mobile Actions -->
                <div class="flex md:hidden items-center gap-2">
                    <button id="mobileSearchToggle" class="p-2 rounded-full text-gray-500 hover:bg-gray-100 transition-colors">
                        <i data-lucide="search" class="w-5 h-5"></i>
                    </button>
                    <!-- Mobile Contact Icon -->
                    <button onclick="document.getElementById('contactModal').showModal()" class="p-2 rounded-full text-brand hover:bg-blue-50 transition-colors">
                        <i data-lucide="message-circle" class="w-5 h-5"></i>
                    </button>
                </div>

                <!-- Social/Contact (Desktop) -->
                <div class="hidden md:flex items-center gap-3">
                    <a href="https://github.com/darylmilanes" target="_blank" class="p-2 text-gray-400 hover:text-brand transition-colors" title="GitHub">
                        <i data-lucide="github" class="w-5 h-5"></i>
                    </a>
                    <button onclick="document.getElementById('contactModal').showModal()" class="px-4 py-2 bg-brand hover:bg-brand-dark text-white text-sm font-medium rounded-full shadow-lg shadow-brand/20 transition-all hover:scale-105 active:scale-95">
                        Contact Me
                    </button>
                </div>
            </div>
            
            <!-- Mobile Search Bar (Expandable) -->
            <div id="mobileSearchBar" class="hidden pb-4 px-1 md:hidden animate-fade-in">
                <input type="text" id="mobileSearchInput" placeholder="Search apps..." 
                    class="block w-full pl-4 pr-4 py-2 border border-gray-200 rounded-xl bg-white focus:outline-none focus:border-brand focus:ring-1 focus:ring-brand text-base shadow-inner">
            </div>
        </div>
    </header>

    <!-- Navigation / Filter Bar -->
    <nav class="bg-white/50 border-b border-gray-100 py-3 sticky top-[64px] md:top-[80px] z-40 backdrop-blur-sm">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex overflow-x-auto hide-scroll gap-2 pb-1" id="categoryContainer">
                <!-- Categories injected by JS -->
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="flex-grow max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 w-full">
        
        <!-- Category Title -->
        <div class="mb-6 flex items-baseline justify-between">
            <h2 id="currentCategoryTitle" class="text-2xl font-display font-bold text-ink">All Projects</h2>
            <span id="projectCount" class="text-sm font-medium text-gray-400 bg-gray-50 px-3 py-1 rounded-full border border-gray-100">Loading...</span>
        </div>

        <!-- Grid -->
        <div id="projectsGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            <!-- Cards injected by JS -->
        </div>

        <!-- Empty State (Hidden by default) -->
        <div id="emptyState" class="hidden flex-col items-center justify-center py-20 text-center">
            <div class="bg-gray-50 p-6 rounded-full mb-4">
                <i data-lucide="search-x" class="w-10 h-10 text-gray-300"></i>
            </div>
            <h3 class="text-lg font-semibold text-gray-600">No projects found</h3>
            <p class="text-gray-400 text-sm mt-1">Try adjusting your search or category filter.</p>
            <button onclick="resetFilters()" class="mt-6 text-brand font-medium hover:underline">Clear all filters</button>
        </div>

    </main>

    <!-- Footer -->
    <footer class="bg-white border-t border-gray-100 mt-auto">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
            <div class="flex flex-col md:flex-row justify-between items-center gap-6">
                <div class="text-sm text-gray-500">
                    &copy; <span id="year"></span> Daryl Milanes. All rights reserved.
                </div>
                <div class="flex flex-wrap justify-center gap-6 text-sm font-medium text-gray-600">
                    <a href="mailto:hello@darylmilanes.com" class="hover:text-brand transition-colors flex items-center gap-2">
                        <i data-lucide="mail" class="w-4 h-4"></i> hello@darylmilanes.com
                    </a>
                    <a href="tel:+639692371267" class="hover:text-brand transition-colors flex items-center gap-2">
                        <i data-lucide="phone" class="w-4 h-4"></i> +63 969 237 1267
                    </a>
                    <a href="https://github.com/darylmilanes" target="_blank" class="hover:text-brand transition-colors flex items-center gap-2">
                        <i data-lucide="github" class="w-4 h-4"></i> GitHub
                    </a>
                </div>
            </div>
        </div>
    </footer>

    <!-- Age Verification Modal -->
    <dialog id="ageModal" class="backdrop:bg-black/60 rounded-2xl shadow-2xl p-0 overflow-hidden max-w-sm w-full m-auto open:animate-fade-in">
        <div class="bg-white">
            <div class="bg-accent-red/10 p-6 flex flex-col items-center justify-center border-b border-accent-red/20">
                <div class="w-12 h-12 rounded-full bg-accent-red/20 flex items-center justify-center text-accent-red mb-3">
                    <i data-lucide="shield-alert" class="w-6 h-6"></i>
                </div>
                <h3 class="text-lg font-bold text-accent-red uppercase tracking-wider">Restricted Content</h3>
            </div>
            <div class="p-6 text-center">
                <p class="text-gray-600 mb-6">
                    This section contains content intended for mature audiences (Rated 18+). 
                    By proceeding, you confirm that you are at least 18 years of age.
                </p>
                <div class="flex flex-col gap-3">
                    <button id="confirmAgeBtn" class="w-full py-3 bg-accent-red hover:bg-red-700 text-white font-bold rounded-xl transition-colors shadow-lg shadow-red-200">
                        I am 18 or older
                    </button>
                    <button onclick="document.getElementById('ageModal').close()" class="w-full py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 font-semibold rounded-xl transition-colors">
                        Go Back
                    </button>
                </div>
            </div>
        </div>
    </dialog>

    <!-- Contact Modal -->
    <dialog id="contactModal" class="backdrop:bg-black/40 rounded-2xl shadow-2xl p-0 overflow-hidden max-w-sm w-full m-auto open:animate-fade-in">
        <div class="bg-white p-0">
            <div class="p-6 bg-brand text-white flex items-center justify-between">
                <h3 class="text-xl font-bold font-display">Get in Touch</h3>
                <button onclick="document.getElementById('contactModal').close()" class="p-1 hover:bg-white/20 rounded-full transition-colors">
                    <i data-lucide="x" class="w-5 h-5"></i>
                </button>
            </div>
            <div class="p-6 flex flex-col gap-4">
                <a href="mailto:hello@darylmilanes.com" class="flex items-center gap-4 p-4 rounded-xl hover:bg-gray-50 border border-gray-100 transition-all hover:border-brand/30 group">
                    <div class="w-10 h-10 rounded-full bg-blue-50 text-brand flex items-center justify-center group-hover:bg-brand group-hover:text-white transition-colors">
                        <i data-lucide="mail" class="w-5 h-5"></i>
                    </div>
                    <div class="flex flex-col">
                        <span class="text-xs text-gray-400 font-medium uppercase tracking-wide">Email</span>
                        <span class="text-ink font-semibold group-hover:text-brand transition-colors">hello@darylmilanes.com</span>
                    </div>
                </a>
                
                <a href="tel:+639692371267" class="flex items-center gap-4 p-4 rounded-xl hover:bg-gray-50 border border-gray-100 transition-all hover:border-brand/30 group">
                    <div class="w-10 h-10 rounded-full bg-green-50 text-green-600 flex items-center justify-center group-hover:bg-green-600 group-hover:text-white transition-colors">
                        <i data-lucide="phone" class="w-5 h-5"></i>
                    </div>
                    <div class="flex flex-col">
                        <span class="text-xs text-gray-400 font-medium uppercase tracking-wide">Mobile</span>
                        <span class="text-ink font-semibold group-hover:text-green-700 transition-colors">+63 969 237 1267</span>
                    </div>
                </a>

                <a href="https://github.com/darylmilanes" target="_blank" class="flex items-center gap-4 p-4 rounded-xl hover:bg-gray-50 border border-gray-100 transition-all hover:border-brand/30 group">
                    <div class="w-10 h-10 rounded-full bg-gray-100 text-gray-600 flex items-center justify-center group-hover:bg-gray-800 group-hover:text-white transition-colors">
                        <i data-lucide="github" class="w-5 h-5"></i>
                    </div>
                    <div class="flex flex-col">
                        <span class="text-xs text-gray-400 font-medium uppercase tracking-wide">Social</span>
                        <span class="text-ink font-semibold group-hover:text-gray-800 transition-colors">darylmilanes</span>
                    </div>
                </a>
            </div>
        </div>
    </dialog>

    <!-- JavaScript Logic -->
    <script>
        // --- DATA SOURCE ---
        const projects = [
            // CATEGORY: PRODUCTIVITY (10)
            { title: "AirLink", desc: "Cross-platform calendar app.", url: "https://darylmilanes.com/airlink", cat: "productivity", icon: "ðŸ—“ï¸", tags: "calendar time" },
            { title: "EveryDate", desc: "Calendar and reminders app in one.", url: "https://darylmilanes.com/EveryDate/", cat: "productivity", icon: "ðŸ“…", tags: "tasks reminders" },
            { title: "Daily Checklist", desc: "Simple daily task management.", url: "https://darylmilanes.com/daily-checklist/", cat: "productivity", icon: "âœ…", tags: "todo tasks" },
            { title: "Checklist", desc: "Data management and CRM for work.", url: "https://darylmilanes.com/checklist/", cat: "productivity", icon: "ðŸ“‹", tags: "crm data" },
            { title: "VersaPad", desc: "Cross-platform notepad, reminders & coding.", url: "https://darylmilanes.com/versapad/", cat: "productivity", icon: "ðŸ“", tags: "code notes" },
            { title: "Decode", desc: "QR code generator & URL shortener.", url: "https://darylmilanes.com/decode/", cat: "productivity", icon: "ðŸ”—", tags: "qr tinyurl" },
            { title: "Best Deal Calculator", desc: "Compare products to find the best value.", url: "https://darylmilanes.com/best-deal-calculator/", cat: "productivity", icon: "ðŸ·ï¸", tags: "shopping calc" },
            { title: "Proposal Calculator", desc: "Price proposal breakdowns.", url: "https://darylmilanes.com/price-proposal-calculator/", cat: "productivity", icon: "ðŸ’¼", tags: "quote finance" },
            { title: "Project Cost Estimator", desc: "Configurable cost estimator.", url: "https://darylmilanes.com/programme-cost-estimator/", cat: "productivity", icon: "ðŸ“Š", tags: "budget plan" },
            { title: "Quix", desc: "Clean and simple note taking app.", url: "https://darylmilanes.com/quix/", cat: "productivity", icon: "âœï¸", tags: "notes writing", badge: "Ongoing" },

            // CATEGORY: EDUCATION (13)
            { title: "GradeVault", desc: "Grading system for schools.", url: "https://darylmilanes.com/GradeVault/", cat: "education", icon: "ðŸŽ“", tags: "grades teacher" },
            { title: "CampusFlow", desc: "School data monitoring.", url: "https://darylmilanes.com/campusflow/", cat: "education", icon: "ðŸ«", tags: "admin data" },
            { title: "Lesson Dashboard", desc: "Access lessons for different classes.", url: "https://darylmilanes.com/lesson_dashboard/", cat: "education", icon: "ðŸ“š", tags: "content lms" },
            { title: "BentoBoard", desc: "Dashboard for multi-access class resources.", url: "https://darylmilanes.com/bentoboard/", cat: "education", icon: "ðŸ±", tags: "dashboard" },
            { title: "Seat Plan", desc: "Digital seat plan & attendance recorder.", url: "https://darylmilanes.com/seatplan-attendance/", cat: "education", icon: "ðŸª‘", tags: "attendance class" },
            { title: "StudyTracker", desc: "Study progress tracker for students.", url: "https://darylmilanes.com/studytracker/", cat: "education", icon: "ðŸ“ˆ", tags: "student stats" },
            { title: "QuizGen", desc: "Generate and answer quizzes.", url: "https://darylmilanes.com/quizgen/", cat: "education", icon: "â“", tags: "quiz test" },
            { title: "WritingLab", desc: "AI writing proficiency assistant.", url: "https://darylmilanes.com/writinglab/", cat: "education", icon: "âœï¸", tags: "ai writing gemini" },
            { title: "CareerMode", desc: "Interview prep for students.", url: "https://darylmilanes.com/careermode/", cat: "education", icon: "ðŸ‘”", tags: "jobs interview ai" },
            { title: "Resume Builder", desc: "Create professional resumes.", url: "https://darylmilanes.com/resume-builder/", cat: "education", icon: "ðŸ“„", tags: "cv jobs" },
            { title: "BidBase", desc: "Bid calculation for MOE school ITQs.", url: "https://darylmilanes.com/bidbase/", cat: "education", icon: "ðŸ’°", tags: "finance moe" },
            { title: "Outline Generator", desc: "Programme outline writer for MOE.", url: "https://darylmilanes.com/moe-outlinegenerator/", cat: "education", icon: "ðŸ–Šï¸", tags: "docs moe" },
            { title: "Let's Vault In!", desc: "Interactive class game.", url: "https://darylmilanes.com/game-letsvaultin/", cat: "education", icon: "ðŸŽ®", tags: "game fun" },

            // CATEGORY: LIFESTYLE (8)
            { title: "FairShare", desc: "Budget splitter for groups travelling.", url: "https://darylmilanes.com/fairshare/", cat: "lifestyle", icon: "âœˆï¸", tags: "travel money" },
            { title: "SplitSync", desc: "Budget and expenses sharing in a household.", url: "https://darylmilanes.com/splitsync/", cat: "lifestyle", icon: "ðŸ ", tags: "home money" },
            { title: "BlockSync", desc: "HOA accounting and transparency tool.", url: "https://darylmilanes.com/blocksync/", cat: "lifestyle", icon: "ðŸ˜ï¸", tags: "community" },
            { title: "Grocery List", desc: "Shopping list management.", url: "https://darylmilanes.com/grocery/", cat: "lifestyle", icon: "ðŸ›’", tags: "food shop" },
            { title: "Victual", desc: "Food and menu inventory planner.", url: "https://darylmilanes.com/victual/", cat: "lifestyle", icon: "ðŸ¥˜", tags: "cooking food" },
            { title: "Menu List", desc: "Digital menu browser.", url: "https://darylmilanes.com/menu-list/", cat: "lifestyle", icon: "ðŸ½ï¸", tags: "restaurant", badge: "Beta" },
            { title: "Raffle Roll", desc: "Digital raffle game.", url: "https://darylmilanes.com/raffle-roll/", cat: "lifestyle", icon: "ðŸŽ°", tags: "game random" },
            { title: "Ticketing System", desc: "Event ticketing.", url: "https://darylmilanes.com/ticketing-system/", cat: "lifestyle", icon: "ðŸŽŸï¸", tags: "events", badge: "WIP" },

            // CATEGORY: INSIGHTS (9)
            { title: "Guide", desc: "Spiritual guide.", url: "https://guide.darylmilanes.com/", cat: "insights", icon: "ðŸ•Šï¸", tags: "spirit" },
            { title: "Discover", desc: "Spiritual exploration.", url: "https://discover.darylmilanes.com/", cat: "insights", icon: "ðŸ§­", tags: "spirit" },
            { title: "Overview", desc: "Spiritual overview.", url: "https://overview.darylmilanes.com/", cat: "insights", icon: "ðŸ”­", tags: "spirit" },
            { title: "Pick-a-verse", desc: "Random verse and reflection.", url: "https://darylmilanes.com/pick-a-verse/", cat: "insights", icon: "ðŸ“–", tags: "bible" },
            { title: "Scribe", desc: "Stories interpreted using the Bible.", url: "https://darylmilanes.com/scribe/", cat: "insights", icon: "ðŸ“œ", tags: "stories" },
            { title: "Beyond Aware", desc: "Digital awareness guide.", url: "https://darylmilanes.com/beyond-aware/", cat: "insights", icon: "ðŸ’¡", tags: "guide" },
            { title: "Ang Batang Pinoy", desc: "Digital guide for Filipino kids.", url: "https://darylmilanes.com/ang-batang-pinoy/", cat: "insights", icon: "ðŸ‡µðŸ‡­", tags: "kids culture" },
            { title: "HIV Awareness", desc: "Digital guide for HIV info.", url: "https://darylmilanes.com/HIVawareness/", cat: "insights", icon: "ðŸŽ—ï¸", tags: "health" },
            { title: "Sustainability", desc: "Digital guide for eco-living.", url: "https://darylmilanes.com/sustainability/", cat: "insights", icon: "ðŸŒ±", tags: "eco" },

            // CATEGORY: RESTRICTED (1)
            { title: "The Sunday Strip", desc: "Rated 18 BL stories.", url: "https://darylmilanes.com/thesundaystrip/", cat: "restricted", icon: "ðŸ”ž", tags: "stories adult", restricted: true }
        ];

        // --- STATE ---
        let currentFilter = 'all';
        let searchQuery = '';
        let targetRestrictedUrl = '';

        // --- DOM ELEMENTS ---
        const grid = document.getElementById('projectsGrid');
        const categoryContainer = document.getElementById('categoryContainer');
        const countSpan = document.getElementById('projectCount');
        const titleEl = document.getElementById('currentCategoryTitle');
        const emptyState = document.getElementById('emptyState');
        const ageModal = document.getElementById('ageModal');

        // --- CATEGORY CONFIG ---
        const categories = [
            { id: 'all', label: 'All Projects', icon: 'grid' },
            { id: 'productivity', label: 'Productivity', icon: 'zap' },
            { id: 'education', label: 'Education', icon: 'graduation-cap' },
            { id: 'lifestyle', label: 'Lifestyle', icon: 'coffee' },
            { id: 'insights', label: 'Insights', icon: 'lightbulb' },
            { id: 'restricted', label: 'Restricted', icon: 'shield-alert', color: 'text-accent-red' }
        ];

        // --- INIT ---
        window.addEventListener('DOMContentLoaded', () => {
            renderCategories();
            renderProjects();
            lucide.createIcons();
            document.getElementById('year').textContent = new Date().getFullYear();

            // Search Listeners
            const handleSearch = (e) => {
                searchQuery = e.target.value.toLowerCase();
                renderProjects();
            };
            document.getElementById('desktopSearch').addEventListener('input', handleSearch);
            document.getElementById('mobileSearchInput').addEventListener('input', handleSearch);

            // Mobile Search Toggle
            document.getElementById('mobileSearchToggle').addEventListener('click', () => {
                const bar = document.getElementById('mobileSearchBar');
                bar.classList.toggle('hidden');
                if(!bar.classList.contains('hidden')) {
                    document.getElementById('mobileSearchInput').focus();
                }
            });

            // Age Gate Confirmation
            document.getElementById('confirmAgeBtn').addEventListener('click', () => {
                localStorage.setItem('isAdult', 'true');
                ageModal.close();
                if(targetRestrictedUrl) window.open(targetRestrictedUrl, '_blank');
            });
        });

        // --- RENDERING ---
        function renderCategories() {
            categoryContainer.innerHTML = categories.map(cat => `
                <button onclick="setFilter('${cat.id}')" 
                    class="category-btn whitespace-nowrap px-4 py-2 rounded-full text-sm font-semibold transition-all border flex items-center gap-2
                    ${currentFilter === cat.id 
                        ? 'bg-brand text-white border-brand shadow-lg shadow-brand/20' 
                        : 'bg-white text-gray-500 border-gray-100 hover:bg-gray-50 hover:text-ink'
                    }">
                    <i data-lucide="${cat.icon}" class="w-4 h-4 ${cat.color || ''}"></i>
                    ${cat.label}
                </button>
            `).join('');
            lucide.createIcons();
        }

        function renderProjects() {
            // Filter Data
            const filtered = projects.filter(item => {
                const matchesCat = currentFilter === 'all' || item.cat === currentFilter;
                const matchesSearch = item.title.toLowerCase().includes(searchQuery) || 
                                      item.desc.toLowerCase().includes(searchQuery) ||
                                      item.tags.includes(searchQuery);
                return matchesCat && matchesSearch;
            });

            // Update UI Counters
            countSpan.textContent = `${filtered.length} App${filtered.length !== 1 ? 's' : ''}`;
            titleEl.textContent = categories.find(c => c.id === currentFilter).label;

            // Handle Empty State
            if (filtered.length === 0) {
                grid.innerHTML = '';
                emptyState.classList.remove('hidden');
                emptyState.classList.add('flex');
                return;
            } else {
                emptyState.classList.add('hidden');
                emptyState.classList.remove('flex');
            }

            // Generate HTML
            grid.innerHTML = filtered.map((item, index) => {
                // Staggered animation delay
                const delay = index * 50; 
                
                // Color coding for cards based on category
                let badgeClass = "bg-gray-100 text-gray-600";
                if(item.badge === "WIP" || item.badge === "Ongoing") badgeClass = "bg-accent-amber/20 text-yellow-700";
                if(item.badge === "Beta") badgeClass = "bg-blue-100 text-brand";

                return `
                <a href="${item.url}" 
                   target="_blank" 
                   rel="noopener"
                   onclick="return handleClick(event, '${item.url}', ${item.restricted || false})"
                   class="group relative flex flex-col p-6 bg-white rounded-2xl border border-gray-100 shadow-glass hover:shadow-glass-hover transition-all duration-300 hover:-translate-y-1 animate-fade-in"
                   style="animation-delay: ${delay}ms">
                    
                    <div class="flex items-start justify-between mb-4">
                        <div class="w-12 h-12 flex items-center justify-center text-3xl bg-gray-50 rounded-xl group-hover:scale-110 transition-transform duration-300">
                            ${item.icon}
                        </div>
                        ${item.badge ? `<span class="text-[10px] font-bold uppercase tracking-wider px-2 py-1 rounded-md ${badgeClass}">${item.badge}</span>` : ''}
                        ${item.restricted ? `<span class="text-[10px] font-bold uppercase tracking-wider px-2 py-1 rounded-md bg-accent-red/10 text-accent-red flex items-center gap-1"><i data-lucide="lock" class="w-3 h-3"></i> 18+</span>` : ''}
                    </div>

                    <h3 class="text-lg font-bold text-ink mb-1 group-hover:text-brand transition-colors">${item.title}</h3>
                    <p class="text-sm text-gray-500 leading-relaxed mb-4 flex-grow">${item.desc}</p>

                    <div class="flex flex-wrap gap-2 mt-auto">
                        ${item.tags.split(' ').slice(0, 3).map(tag => 
                            `<span class="text-xs text-gray-400 bg-gray-50 px-2 py-1 rounded-md">#${tag}</span>`
                        ).join('')}
                    </div>
                    
                    <div class="absolute bottom-6 right-6 opacity-0 transform translate-x-2 group-hover:opacity-100 group-hover:translate-x-0 transition-all duration-300 text-brand">
                        <i data-lucide="external-link" class="w-5 h-5"></i>
                    </div>
                </a>
                `;
            }).join('');
            
            lucide.createIcons();
        }

        // --- ACTIONS ---
        function setFilter(cat) {
            currentFilter = cat;
            renderCategories(); // Re-render buttons to update active state
            renderProjects();
        }

        function resetFilters() {
            currentFilter = 'all';
            searchQuery = '';
            document.getElementById('desktopSearch').value = '';
            document.getElementById('mobileSearchInput').value = '';
            document.getElementById('mobileSearchBar').classList.add('hidden');
            renderCategories();
            renderProjects();
        }

        function handleClick(e, url, isRestricted) {
            if (!isRestricted) return true; // Allow normal navigation

            e.preventDefault(); // Stop navigation
            
            // Check if user already verified in this session
            if (localStorage.getItem('isAdult') === 'true') {
                window.open(url, '_blank');
                return false;
            }

            // Show Modal
            targetRestrictedUrl = url;
            ageModal.showModal();
            return false;
        }
    </script>
</body>
</html>
